$(function(){$("body").removeClass("loading-diamond"),$(window).load(function(){setTimeout(function(){$(".home-page").removeClass("loading-page")},500),setTimeout(function(){$(".inner-page").removeClass("loading-page")},1e3),setTimeout(function(){isMobile()||$(".square-logo").addClass("creating-pixels"),$(".home-page").removeClass("loading-scene"),$(".scene").addClass("scene-in"),$(".preloader").remove()},2e3),setTimeout(function(){$(".square-logo").removeClass("creating-pixels")},2300)});var e="light dark home-page portfolio single-item about-us page--about mk--item viking--item minimable--item abito--item inverigo--item home--transition contact-us",o={prefetch:!0,cacheLength:2,scroll:!1,onBefore:function(e,o){var i=e.context.className;e.context.parentElement;"pr-nav"==i&&($(".pr-nav").parent().hasClass("minimable--nav")&&$("body").append('<div class="cover-loading minimable-bg"></div>'),$(".pr-nav").parent().hasClass("inverigo--nav")&&$("body").append('<div class="cover-loading inverigo-bg"></div>'),$(".pr-nav").parent().hasClass("mk--nav")&&$("body").append('<div class="cover-loading mk-bg"></div>'),$(".pr-nav").parent().hasClass("viking--nav")&&$("body").append('<div class="cover-loading viking-bg"></div>'),$(".pr-nav").parent().hasClass("abito--nav")&&$("body").append('<div class="cover-loading abito-bg"></div>'),setTimeout(function(){$(".cover-loading").addClass("opened")},1),$("#main").addClass("cover-opening"),setTimeout(function(){$("html,body").animate({scrollTop:$("#main").offset().top},1200,"easeOutCubic",function(){$("body").removeClass("loading-exiting"),$(".dynamic-diamond").addClass("loading"),$(".cover-loading").removeClass("opened"),setTimeout(function(){$("body").removeClass("item-exiting"),$(".cover-loading").remove()},1e3)})},500)),$("body").removeClass("open-mobile-menu"),$(".navicon-button").removeClass("open")},onStart:{duration:1e3,scroll:!1,render:function(e){$("body").addClass("is-exiting"),i=1,n.restartCSSAnimations(),$("#main").hasClass("cover-opening")||$("html,body").animate({scrollTop:$("#main").offset().top},1e3,function(){})}},onReady:{duration:0,scroll:!1,render:function(e,o){i=1,$("#main").removeClass("home--transition"),e.html(o)}},onAfter:function(o,i){window.location.href.indexOf("")>-1&&($("body").removeClass(e),$("body").addClass(" dark home--transition home-page")),window.location.href.indexOf("projects")>-1&&($("body").removeClass(e),$("body").addClass("dark portfolio")),window.location.href.indexOf("projects")&&window.location.href.indexOf("abito")>-1&&($("body").removeClass(e),$("body").addClass("dark single-item abito--item")),window.location.href.indexOf("projects")&&window.location.href.indexOf("minimable")>-1&&($("body").removeClass(e),$("body").addClass("dark single-item minimable--item")),window.location.href.indexOf("projects")&&window.location.href.indexOf("inverigo")>-1&&($("body").removeClass(e),$("body").addClass("dark single-item inverigo--item")),window.location.href.indexOf("projects")&&window.location.href.indexOf("musikee")>-1&&($("body").removeClass(e),$("body").addClass("dark single-item mk--item")),window.location.href.indexOf("projects")&&window.location.href.indexOf("viking")>-1&&($("body").removeClass(e),$("body").addClass("dark single-item viking--item")),(window.location.href.indexOf("studio")>-1||window.location.href.indexOf("events")>-1||window.location.href.indexOf("clients")>-1)&&($("body").removeClass(e),$("body").addClass("light about-us")),window.location.href.indexOf("contact")>-1&&($("body").removeClass(e),$("body").addClass("dark contact-us")),setTimeout(function(){$("body").removeClass("is-exiting"),$("#main").removeClass("cover-opening")},1e3);var n=$(window).height();isSmartphone()||($(".wrapper").height(n),$(window).resize(function(){var e=$(window).height();setTimeout(function(){$(".wrapper").height(e)},120)})),setTimeout(function(){isMobile()?($(".item__block, .feature, .mk--bg").addClass("block--in"),incrementNumber(".block--in .el1",9e4),incrementNumber(".block--in .el2",2500),$("video").attr("controls","")):initTransition(),initParallax()},1e3),$("#scene").parallax();var a=6;isMobile()&&($(".portfolio-page .more--projects").remove(),a=5),isMobile()?swipePortfolio():initScrollPortfolio(),initSwipeStudio(),mobileMenuInit()}},n=$("#main").smoothState(o).data("smoothState")});
$("#scene").parallax();
function mobileMenuInit(){0==$(".mobile__menu").length&&($header=$(".header"),$menuDesktop=$(".header__nav"),$header.after('<div class="mobile__menu"></div>'),$menuDesktop.clone().appendTo(".mobile__menu"))}function pixelGenerator(){if(!$("body").hasClass("is-exiting")){var e=($(".square-logo"),["dir-1","dir-2","dir-3","dir-4","dir-5","dir-6","dir-7","dir-8"]),o=["color-1","color-2","color-3"],n=Math.floor(1e5*Math.random());$(".home").append('<span class="pixel" id="'+n+'"></span>'),setTimeout(function(){$("#"+n).fadeOut().remove()},2500),$(".square-logo").addClass("creating-pixel"),setTimeout(function(){$(".pixel").last().addClass(o[Math.floor(Math.random()*o.length)])},30),setTimeout(function(){$(".pixel").last().addClass(e[Math.floor(Math.random()*e.length)])},90),setTimeout(function(){$(".square-logo").removeClass("creating-pixel")},300)}}var isSmartphone=function(){return"Smartphone"===WURFL.form_factor?($("body").addClass("smartphone"),!0):!1},isMobile=function(){return WURFL.is_mobile===!0?($("body").addClass("touch"),!0):!1},isOldIOS=function(){return iOSversion()[0]<8?($("body").addClass("old-ios"),!0):!1},iOSversion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}return!1},$heightBody=$(window).height();isSmartphone()||($(".wrapper").height($heightBody),$(window).resize(function(){var e=$(window).height();setTimeout(function(){$(".wrapper").height(e)},120)})),mobileMenuInit(),$body=$("body"),$btMenu=$(".navicon-button"),$("body").on("click",".navicon-button",function(e){e.preventDefault(),$(this).toggleClass("open"),$body.toggleClass("open-mobile-menu")});var int;$("body").hasClass("is-exiting")||(int=setInterval(pixelGenerator,5e3)),$("body").on("click",".square-logo",function(){clearInterval(int),pixelGenerator(),int=setInterval(pixelGenerator,5e3)}),$(".square-logo").on("mouseenter",function(){clearInterval(int)}),$(".square-logo").on("mouseleave",function(){clearInterval(int),int=setInterval(pixelGenerator,5e3)});
function changeItemsDown(){howMany>i?(i++,setTimeout(function(){$(".portfolio--content:nth-child("+i+")").addClass("current")},portfolioTime),setTimeout(function(){$(".portfolio--content:nth-child("+i+")").addClass("elements--in")},portfolioTime+1),3>=i&&$(".middle--top li:nth-child("+i+")").addClass("active"),i>=3&&$(".middle--bottom li:nth-child("+(i-3)+")").addClass("active")):(i=1,setTimeout(function(){$(".portfolio--content").first().addClass("current")},portfolioTime),setTimeout(function(){$(".portfolio--content").first().addClass("elements--in")},portfolioTime+1),$(".middle--top li").first().addClass("active")),isMobile()||(i==howMany?($(".more--content").addClass("diamond--current"),$(".project--content").removeClass("diamond--current"),$("body").addClass("more--items")):($(".more--content").removeClass("diamond--current"),$(".project--content").addClass("diamond--current"),$("body").removeClass("more--items")))}function changeItemsUp(){howMany>=i&&i>1?(setTimeout(function(){$(".portfolio--content:nth-child("+i+")").addClass("current")},portfolioTime),setTimeout(function(){$(".portfolio--content:nth-child("+i+")").addClass("elements--in")},portfolioTime+1),4>=i&&$(".middle--top li:nth-child("+(i-1)+")").addClass("active"),i>=4&&$(".middle--bottom li:nth-child("+(i-4)+")").addClass("active"),i--):(i=howMany+1,setTimeout(function(){$(".portfolio--content").last().addClass("current")},portfolioTime),setTimeout(function(){$(".portfolio--content").last().addClass("elements--in")},portfolioTime+1),$(".middle--bottom li").last().addClass("active"),i--),isMobile()||(i==howMany?($(".more--content").addClass("diamond--current"),$(".project--content").removeClass("diamond--current"),$("body").addClass("more--items")):($(".more--content").removeClass("diamond--current"),$(".project--content").addClass("diamond--current"),$("body").removeClass("more--items")))}function updateNumber(){var e;e=isMobile()?howMany:howMany-1;$(".current").data("cat"),$(".current").data("count");$(".project--content").find(".number").removeClass("cur-num"),$(".more--content").hasClass("diamond--current")?$(".project--content").find(".number").addClass("stop-num"):setTimeout(function(){$(".project--content").find(".number").removeClass("stop-num")},300),$(".more--content").hasClass("diamond--current")||setTimeout(function(){e>=i&&$(".project--content").find(".number .n").text(i)},portfolioTime),$(".project--content").hasClass("diamond--current")&&setTimeout(function(){$(".project--content").find(".number").addClass("cur-num")},portfolioTime+1)}function removeCurrent(){$(".project--content").find(".project__category").removeClass("cur-cat"),$(".portfolio--content").removeClass("elements--in"),setTimeout(function(){$(".portfolio--content").removeClass("current")},portfolioTime),$(".portfolio--nav li").removeClass("active")}function updateCurrent(){setTimeout(function(){var e=$(".current").data("count"),t=$(".current").data("cat");e==i&&$(".project--content").find(".project__category span").text(t)},portfolioTime),$(".project--content").hasClass("diamond--current")&&setTimeout(function(){$(".project--content").find(".project__category").addClass("cur-cat")},portfolioTime+1)}function initScrollPortfolio(){if($(".portfolio-page").length){var e=new WheelIndicator({elem:document.querySelector(".portfolio-page"),callback:function(e){setTimeout(function(){$(".wrapper").addClass("item-changing")},10),setTimeout(function(){$(".wrapper").removeClass("item-changing")},2e3),$(".wrapper").hasClass("item-changing")||(removeCurrent(),"down"==e.direction&&changeItemsDown(),"up"==e.direction&&changeItemsUp(),updateNumber(),updateCurrent())}});e.getOption("preventMouse")}}function swipePortfolio(){$(".portfolio-page .wrapper").swipe({allowPageScroll:"auto",swipe:function(e,t,o,n,r,a){$(".portfolio--nav li").removeClass("active"),"left"==t&&($(".portfolio--content").removeClass("elements--in"),setTimeout(function(){$(".portfolio--content").removeClass("current")},portfolioTime),changeItemsDown(),$(".project--content").find(".number").removeClass("cur-num"),setTimeout(function(){$(".project--content").find(".number .n").text(i)},portfolioTime),setTimeout(function(){$(".project--content").find(".number").addClass("cur-num")},portfolioTime+1)),"right"==t&&($(".portfolio--content").removeClass("elements--in"),setTimeout(function(){$(".portfolio--content").removeClass("current")},portfolioTime),changeItemsUp(),$(".project--content").find(".number").removeClass("cur-num"),setTimeout(function(){$(".project--content").find(".number .n").text(i)},portfolioTime),setTimeout(function(){$(".project--content").find(".number").addClass("cur-num")},portfolioTime+1))}})}var i=1,howMany=6;isMobile()&&($(".portfolio-page .more--projects").remove(),howMany=5);var portfolioTime=800;isMobile()||initScrollPortfolio(),$("body").on("click",".portfolio--nav a",function(e){e.preventDefault();var t=$(this.hash);removeCurrent(),dataItem=$(this).data("item"),i=dataItem,$(this).parent().addClass("active"),setTimeout(function(){t.addClass("current")},portfolioTime),setTimeout(function(){t.addClass("elements--in")},portfolioTime+1),6==dataItem?($(".more--content").addClass("diamond--current"),$(".project--content").removeClass("diamond--current")):($(".more--content").removeClass("diamond--current"),$(".project--content").addClass("diamond--current")),updateNumber(),updateCurrent()}),$("body").on("click",".arrow-left",function(e){e.preventDefault(),removeCurrent(),changeItemsUp(),updateNumber(),updateCurrent()}),$("body").on("click",".arrow-right",function(e){e.preventDefault(),removeCurrent(),changeItemsDown(),updateNumber(),updateCurrent()}),swipePortfolio();var more_sites=[{item:"7",agency:"Kayak Adv",cat:"WordPress Website",year:"2015"},{item:"8",agency:"Kayak Adv",cat:"WordPress Website",year:"2015"},{item:"9",agency:"Kayak Adv",cat:"WordPress Website",year:"2015"},{item:"10",agency:"Kayak Adv",cat:"WordPress Website",year:"2014"},{item:"11",agency:"Kayak Adv",cat:"WordPress Website",year:"2012"},{item:"12",agency:"Kayak Adv",cat:"WordPress Website",year:"2013"},{item:"13",agency:"Kayak Adv",cat:"WordPress Website",year:"2013"}];$.each(more_sites,function(e,t){$("body").on("mouseenter",".more-item",function(){$(".info__detail").addClass("hide"),$this=$(this),$hoverItem=$(this).data("hover"),setTimeout(function(){$hoverItem==t.item&&($(".agency--detail").text(t.agency),$(".cat--detail").text(t.cat),$(".year--detail").text(t.year))},299),setTimeout(function(){$(".info__detail").removeClass("hide")},350),$(".item-image").filter(function(){return $(this).data("image")===$hoverItem}).addClass("active"),$(".active").parent().addClass("cur")}),$("body").on("mouseleave",".more-item",function(){setTimeout(function(){$(".agency--detail").text("---"),$(".cat--detail").text("---"),$(".year--detail").text("---")},299),$(".more--projects .portfolio_right__content").removeClass("cur"),$(".active").parent().removeClass("cur"),$(".item-image").removeClass("active")})});
function initParallax(){if(!isMobile()){var e=jQuery(window);jQuery(".jsItem--parallax").each(function(){var t=jQuery(this);e.scroll(function(){var n=-((e.scrollTop()-t.offset().top)/t.data("speed")),i=n+"px";t.css({transform:"translate3d(0,"+i+", 0)"}),t.hasClass("item__caption")&&t.css({transform:"translate3d(0,"+i+", 0) rotate(270deg)"})})})}}function initTransition(){$(".item__block, .feature, .mk--bg").inViewport(function(e){e>200&&($(this).addClass("block--in"),incrementNumber(".block--in .el1",9e4),incrementNumber(".block--in .el2",2500))}),isMobile()||$(".video__bg").inViewport(function(e){e>0?$("video",this).get(0).play():$("video",this).get(0).pause()})}function incrementNumber(e,t){var n=$(e),i=t;$({percentage:0}).stop(!0).animate({percentage:i},{duration:4e3,step:function(){var e=Math.round(this.percentage);n.text(e).removeClass("el1 el2")}}).promise().done(function(){n.text(i).removeClass("el1 el2")})}!function(e,t){e.fn.inViewport=function(n){return this.each(function(i,o){function r(){var t=e(this).height(),i=o.getBoundingClientRect(),r=i.top,a=i.bottom;return n.call(o,Math.max(0,r>0?t-r:t>a?a:t))}r(),e(t).on("resize scroll",r)})}}(jQuery,window),initParallax(),isMobile()?($(".item__block, .feature, .mk--bg").addClass("block--in"),incrementNumber(".block--in .el1",9e4),incrementNumber(".block--in .el2",2500),$("video").attr("controls","")):initTransition();
function galleryNavArrow(a){var t=$(galleryNav).closest(".gallery__nav").find(".active"),e=t.find("a").data("nav");$(galleryNav).parent().removeClass("active"),$(".image__item").removeClass("active"),"left"==a&&($(galleryNav).filter(function(){return 1===e?4===$(this).data("nav"):2===e?1===$(this).data("nav"):3===e?2===$(this).data("nav"):4===e?3===$(this).data("nav"):void 0}).parent().addClass("active"),$(".image__item").filter(function(){return 1===e?4===$(this).data("image"):2===e?1===$(this).data("image"):3===e?2===$(this).data("image"):4===e?3===$(this).data("image"):void 0}).addClass("active")),"right"==a&&($(galleryNav).filter(function(){return 1===e?2===$(this).data("nav"):2===e?3===$(this).data("nav"):3===e?4===$(this).data("nav"):4===e?1===$(this).data("nav"):void 0}).parent().addClass("active"),$(".image__item").filter(function(){return 1===e?2===$(this).data("image"):2===e?3===$(this).data("image"):3===e?4===$(this).data("image"):4===e?1===$(this).data("image"):void 0}).addClass("active"))}function initSwipeStudio(){$(".gallery__container").swipe({allowPageScroll:"auto",swipe:function(a,t,e,i,r,s){var n=$(galleryNav).closest(".gallery__nav").find(".active"),d=n.find("a").data("nav");"left"==t&&($(galleryNav).parent().removeClass("active"),$(".image__item").removeClass("active"),$(galleryNav).filter(function(){return 1===d?2===$(this).data("nav"):2===d?3===$(this).data("nav"):3===d?4===$(this).data("nav"):4===d?1===$(this).data("nav"):void 0}).parent().addClass("active"),$(".image__item").filter(function(){return 1===d?2===$(this).data("image"):2===d?3===$(this).data("image"):3===d?4===$(this).data("image"):4===d?1===$(this).data("image"):void 0}).addClass("active")),"right"==t&&($(galleryNav).parent().removeClass("active"),$(".image__item").removeClass("active"),$(galleryNav).filter(function(){return 1===d?4===$(this).data("nav"):2===d?1===$(this).data("nav"):3===d?2===$(this).data("nav"):4===d?3===$(this).data("nav"):void 0}).parent().addClass("active"),$(".image__item").filter(function(){return 1===d?4===$(this).data("image"):2===d?1===$(this).data("image"):3===d?2===$(this).data("image"):4===d?3===$(this).data("image"):void 0}).addClass("active"))}})}var galleryNav=".gallery__nav span a",arrowSx=".arrow--linksx",arrowDx=".arrow--linkdx";$("body").on("click",galleryNav,function(a){a.preventDefault(),$(galleryNav).parent().removeClass("active"),$(this).parent().addClass("active");var t=$(this).data("nav");$(".image__item").removeClass("active"),$(".image__item").filter(function(){return $(this).data("image")===t}).addClass("active")}),$("body").on("click",arrowSx,function(a){a.preventDefault(),galleryNavArrow("left")}),$("body").on("click",arrowDx,function(a){a.preventDefault(),galleryNavArrow("right")}),initSwipeStudio();var teamTitle=".js--expand-desc",teamBack=".js--team-back";$("body").on("click",teamTitle,function(a){a.preventDefault();var t=$(this),e=t.data("team"),i=$(this).closest(".about__right").find(".team__description");$(".team__item").removeClass("team--current"),t.siblings().addClass("team--hide"),t.addClass("team--current"),i.removeClass("team--desc-current"),i.filter(function(){return 1===e?1===$(this).data("desc"):2===e?2===$(this).data("desc"):3===e?3===$(this).data("desc"):void 0}).addClass("team--desc-current"),$(".about__right").addClass("team--open")}),$("body").on("click",teamBack,function(a){a.preventDefault(),$(".team__item").removeClass("team--current"),$(".about__right").removeClass("team--open"),$(".team__item").removeClass("team--hide"),$(".team__description").removeClass("team--desc-current"),setTimeout(function(){},600),setTimeout(function(){},700)}),navigator.userAgent.match("MSIE 10.0;")&&$("html").addClass("ie10");